jQuery(function(c){if(typeof form=="undefined"){return}if(typeof fieldSettings!="undefined"&&"text" in fieldSettings){fieldSettings.gc_title=fieldSettings.text.replace(/, .rules_setting/,"");fieldSettings.gc_date_start=fieldSettings.date.replace(/, .rules_setting/,"");fieldSettings.gc_date_end=fieldSettings.date;fieldSettings.gc_time_start=fieldSettings.time;fieldSettings.gc_time_end=fieldSettings.time;fieldSettings.gc_location=fieldSettings.text;fieldSettings.gc_allday=fieldSettings.checkbox.replace(/, .choices_setting/,"");fieldSettings.gc_desc=fieldSettings.textarea+", .gc_desc_template_setting"}var b=c("#add_google_calendar_fields input");if(!form.googleCalendar){b.addClass("disabled")}c(document).bind("gform_load_form_settings",function(e,d){c("#form_google_calendar").val(d.googleCalendar?d.googleCalendar:"")});c("#form_google_calendar").change(function(){var d=c(this).val();form.googleCalendar=d;b.toggleClass("disabled",(d===""));b.qtip("destroy");a()});c("#form_events_require_approval").change(function(){form.eventsRequireApproval=this.checked});c("#form_freebusy_check").change(function(){form.freeBusyCheck=this.checked});b.click(function(){if(c(this).hasClass("disabled")){return false}if(GetFieldsByType([this.id]).length>0){alert("Only one event field can be added to the form");return false}StartAddField(this.id);return true});a();function a(){b.filter(".disabled").qtip({content:gfgcal.msg.calendar_not_selected,show:{delay:500,solo:true},hide:{when:"mouseout",fixed:true,delay:200,effect:"fade"},style:"gformsstyle_left",position:{corner:{target:"topLeft",tooltip:"bottomRight"}}})}});var SetDateInputType=function(a){var b=GetSelectedField();SetFieldProperty("dateType",a);ToggleDateCalendar();LoadDateInputs()};var SetCalendarIconType=function(a,c){var b=GetSelectedField();if(a===undefined){a="none"}if(a=="none"){jQuery("#gsetting_icon_none").attr("checked",true)}else{if(a=="calendar"){jQuery("#gsetting_icon_calendar").attr("checked",true)}else{if(a=="custom"){jQuery("#gsetting_icon_custom").attr("checked",true)}}}SetFieldProperty("calendarIconType",a);ToggleCalendarIconUrl(c);LoadDateInputs()};function ToggleGCDescTemplate(b){var a=b?"":"slow";if(jQuery("#gfield_gc_desc_template_enabled").is(":checked")){jQuery("#gfield_gc_desc_content_container").show(a);if(!b){PopulateContentTemplate("field_gc_desc_content_template")}}else{jQuery("#gfield_gc_desc_content_container").hide(a)}}if(typeof form!="undefined"){jQuery("#gfield_gc_desc_template_enabled").attr("checked",!!form.gcDescTemplateEnabled);jQuery("#field_gc_desc_content_template").val(form.gcDescTemplateEnabled?form.gcDescTemplate:"")}ToggleGCDescTemplate(true);function gfgcal_update_form_object(b){function a(){var d=b.fields,e,c;for(e=0,c=d.length;e<c;e++){if(d[e].type=="gc_desc"){return true}}return false}b.gcDescTemplateEnabled=(jQuery("#gfield_gc_desc_template_enabled").is(":checked")&&a());b.gcDescTemplate=b.gcDescTemplateEnabled?jQuery("#field_gc_desc_content_template").val():"";return b}function gfgcal_pre_form_editor_save(a){return gfgcal_update_form_object(a)}if(gfgcal.gf_pre17==="true"){window.gform_before_update=gfgcal_update_form_object}else{gform.addFilter("gform_pre_form_editor_save","gfgcal_pre_form_editor_save")}var SaveForm=(function(){var a=SaveForm;return function(b){var d,c;if(form.googleCalendar){d=0;if(GetFieldsByType(["gc_date_start","gc_title"]).length<2){alert(gfgcal.msg.mandatory_fields);d++}c=GetFieldsByType(["gc_time_start","gc_time_end"]).length;if(c>0&&c<2){alert(gfgcal.msg.mandatory_time_fields);d++}if(d>0){return false}}a(b);return true}})();